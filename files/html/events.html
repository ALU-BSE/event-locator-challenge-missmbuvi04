<!-- events.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Available Events</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="../css/main.css" />
</head>
<body>

  <!-- Header -->
  <div class="container py-5">
    <h2 class="text-center gradient-text fw-bold mb-4">🎫 Available Events</h2>
    <div class="row" id="eventContainer"></div>
  </div>

  <!-- Script -->
  <script>
    // Dummy event data
    const events = [
      {
        id: 1,
        name: "Nairobi Music Fest",
        date: "2025-08-01",
        location: "Nairobi",
        category: "Music",
        description: "Enjoy Nairobi's biggest music festival with live bands and DJs.",
      },
      {
        id: 2,
        name: "Tech Summit Kenya",
        date: "2025-08-15",
        location: "Mombasa",
        category: "Tech",
        description: "A full-day summit bringing together Kenya’s top tech startups.",
      },
      {
        id: 3,
        name: "Art in the Wild",
        date: "2025-07-20",
        location: "Naivasha",
        category: "Art",
        description: "A magical outdoor gallery showcasing local artists in nature.",
      },
      {
        id: 4,
        name: "AfroPop Night",
        date: "2025-08-10",
        location: "Kisumu",
        category: "Music",
        description: "Dance to the beat of AfroPop under the stars.",
      },
    ];

    // Load filters from localStorage
    const filters = JSON.parse(localStorage.getItem("searchFilters") || '{}');
    const query = (filters.query || "").toLowerCase();
    const date = filters.date || "";
    const category = filters.category || "";

    // Filter logic
    const filteredEvents = events.filter(event => {
      const matchesQuery = event.name.toLowerCase().includes(query);
      const matchesDate = !date || event.date === date;
      const matchesCategory = !category || event.category === category;
      return matchesQuery && matchesDate && matchesCategory;
    });

    // Render cards
    const container = document.getElementById("eventContainer");
    container.innerHTML = "";

    if (filteredEvents.length === 0) {
      container.innerHTML = `
        <div class="col-12 text-center text-muted">
          😕 No events found. Try different filters.
        </div>`;
    } else {
      filteredEvents.forEach(event => {
        const card = document.createElement("div");
        card.className = "col-md-6 col-lg-4 mb-4";
        card.innerHTML = `
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">${event.name}</h5>
              <p><span class="badge bg-secondary">${event.category}</span></p>
              <p><strong>📅</strong> ${event.date}</p>
              <p><strong>📍</strong> ${event.location}</p>
              <p class="text-muted">${event.description.substring(0, 80)}...</p>
              <button class="btn btn-custom mt-2" onclick='viewDetails(${JSON.stringify(event)})'>View Details</button>
            </div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    // Save selected event to localStorage
    function viewDetails(event) {
      localStorage.setItem("selectedEvent", JSON.stringify(event));
      window.location.href = "event-details.html";
    }
  </script>
</body>
</html>
